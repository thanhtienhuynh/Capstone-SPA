<div class="university-detail">
  <!-- <div class="page-header">
    <div class="row align-items-md-center">
      <div class="col-md-6 mb-3">
        <div class="row">
          <div class="col-md-5">
            <nb-form-field>
              <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
              <input type="text" placeholder="" fullWidth nbInput />
            </nb-form-field>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="text-md-right m-v-10">
          <button nbButton status="primary">
            <nb-icon icon="plus-outline"></nb-icon>Thêm Trường
          </button>
        </div>
      </div>
    </div>
  </div>   -->
  <div class="container-fluid">
    <div nz-row>
      <div
        nz-col
        [nzXs]="24"
        [nzSm]="24"
        [nzMd]="24"
        [nzLg]="24"
        [nzXl]="24"
        [nzXXl]="24"
        class="mb-2"
      >
        <nb-card style="margin: auto; width: 99%; position: relative">
          <nb-card-body style="width: 100%">
            <div style="width: 100%">
              <div class="row align-items-center ng-star-inserted">
                <div class="col-md-7">
                  <div class="d-md-flex align-items-center">
                    <nz-avatar
                      nzShape="square"
                      nzSrc="assets/logo-white.png"
                      nz-size="150"
                    >
                    </nz-avatar>
                    <div class="text-center text-sm-left m-v-15 p-l-30 col-md-8">
                      <nb-form-field>                                                
                        <input [formControl]="updateUniForm.get('name')" type="text" placeholder=""  fullWidth nbInput />
                      </nb-form-field>
                      <div class="mt-2">
                        <nb-form-field>
                          <textarea [formControl]="updateUniForm.get('description')" nbInput fullWidth placeholder="Miêu tả" fieldSize="large"></textarea>
                        </nb-form-field>
                      </div>                                            
                    </div>
                  </div>
                </div>
                <div class="col-md-5">
                  <div class="row">
                    <div class="d-md-block border-left col-1"></div>
                    <div class="col">
                      <ul class="list-unstyled m-t-10">
                        <li class="row mt-2">
                          <p
                            class="col-sm-3 col-4 font-weight-semibold text-dark m-b-5"
                          >
                            <nb-icon
                              status="info"
                              icon="globe-outline"
                            ></nb-icon>
                            <span class="label">Website: </span>
                          </p>
                          <div class="col">
                            <nb-form-field>
                              <input [formControl]="updateUniForm.get('webUrl')" nbInput fullWidth type="text">
                            </nb-form-field>
                          </div>
                        </li>
                        <li class="row mt-2">
                          <p
                            class="col-sm-3 col-4 font-weight-semibold text-dark m-b-5"
                          >
                            <nb-icon
                              status="info"
                              icon="phone-outline"
                            ></nb-icon>
                            <span class="label">Điện Thoại: </span>
                          </p>
                          <div class="col">
                            <input [formControl]="updateUniForm.get('phone')" nbInput type="text" fullWidth>
                          </div>
                        </li>
                        <li class="row mt-2">
                          <p
                            class="col-sm-3 col-4 font-weight-semibold text-dark m-b-5"
                          >
                            <nb-icon
                              status="info"
                              icon="home-outline"
                            ></nb-icon>
                            <span class="label">Địa Chỉ: </span>
                          </p>
                          <div class="col">
                            <nb-form-field>
                              <input nbInput type="text" [formControl]="updateUniForm.get('address')" fullWidth>
                            </nb-form-field>
                          </div>
                        </li>
                        <li class="row mt-2">
                          <p
                            class="col-sm-3 col-4 font-weight-semibold text-dark m-b-5"
                          >
                            <nb-icon
                              status="info"
                              icon="layers-outline"
                            ></nb-icon>
                            <span class="label">Học Phí: </span>
                          </p>
                          <div class="col-md-4">
                            <nb-select [formControl]="updateUniForm.get('tuitionType')">        
                              <nb-option value="0">Theo Năm</nb-option>
                              <nb-option value="1">Theo Kì</nb-option>        
                            </nb-select>
                          </div>
                          <div class="col-md-2 p-0 ml-4">
                            <nb-form-field>
                              <input nbInput type="number" [formControl]="updateUniForm.get('tuitionFrom')" fullWidth>
                            </nb-form-field>
                          </div>
                          <div class="col-md-2 p-0 ml-3">
                            <nb-form-field>
                              <input nbInput type="number" [formControl]="updateUniForm.get('tuitionTo')" fullWidth>
                            </nb-form-field>
                          </div>
                        </li>
                      </ul>
                      <div class="d-flex">
                        <div class="col-md-1">
                          <div class="d-flex">
                            <a href="" class="text-gray p-r-20">
                              <nb-icon nbTooltip="This is a tooltip" nbTooltipPlacement="top" icon="facebook-outline"></nb-icon>
                            </a>
                            <a href="" class="text-gray p-r-20">
                              <nb-icon icon="globe-outline"></nb-icon>
                            </a>
                          </div>
                        </div>
                        <div class="col-md-9"></div>
                        <button (click)="updateUni()" nbButton status="primary">Lưu</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </nb-card-body>
        </nb-card>
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div nz-row>
      <div
        nz-col
        [nzXs]="24"
        [nzSm]="24"
        [nzMd]="24"
        [nzLg]="24"
        [nzXl]="24"
        [nzXXl]="24"
        class="mb-2"
      >
        <nb-card style="margin: auto; width: 99%; position: relative">
          <nb-card-body style="width: 100%">
            <div style="width: 100%; min-height: 42rem">
              <button
                style="float: right; margin-bottom: 1rem"
                (click)="openCreateMajorModal(undefined)"
                nbButton
                status="primary"
              >
                <nb-icon icon="plus-outline"></nb-icon>Thêm Ngành
              </button>
              <nz-table nzBordered [nzData]="listOfMajor">
                <thead>
                  <tr>
                    <th rowspan="3">STT</th>
                    <th rowspan="3">Ngành</th>
                    <th rowspan="3">Code</th>
                    <th colspan="3">Khối</th>
                    <th rowspan="3">Chỉ Tiêu</th>
                    <th rowspan="3">Thao Tác</th>
                  </tr>
                  <tr>
                    <th rowspan="2">Tên</th>
                    <th colspan="2">Năm</th>
                  </tr>
                  <tr>
                    <th>2019</th>
                    <th>2020</th>
                  </tr>
                </thead>

                <tbody>
                  <ng-container *ngFor="let major of listOfMajor; let i = index">
                    <tr >
                      <td [attr.rowspan]="major.subjectGroups.length + 1">{{i + 1}}</td>
                      <td [attr.rowspan]="major.subjectGroups.length + 1">{{major.name}}</td>
                      <td [attr.rowspan]="major.subjectGroups.length + 1">{{major.code}}</td> 
                      <!-- <td [attr.rowspan]="major.subjectGroups.length + 1">100</td> 
                      <td [attr.rowspan]="major.subjectGroups.length + 1">...</td>                             -->
                      <!-- <td [rowspan]="major.subjectGroups.length + 1">
                        <i
                          style="cursor: pointer"
                          [nzDropdownMenu]="menu1"
                          nz-icon
                          nz-dropdown
                          nzType="ellipsis"
                        ></i>
                        <nz-dropdown-menu #menu1="nzDropdownMenu">
                          <ul nz-menu>
                            <li nz-menu-item (click)="openCreateMajorModal(item)">
                              <i nz-icon nzType="edit" nzTheme="outline"></i>
                              <span class="p-3">Sửa</span>
                            </li>
                            <li nz-menu-divider></li>
                            <li nz-menu-item>
                              <nb-icon icon="trash"></nb-icon>
                              <span class="p-3">Xóa</span>
                            </li>
                          </ul>
                        </nz-dropdown-menu>
                      </td> -->
                    </tr>                                        

                    <ng-container *ngFor="let subjectGroup of major.subjectGroups">
                      <tr>                      
                        <td>{{subjectGroup.groupCode}}</td>    
                        <ng-container *ngFor="let entryMark of subjectGroup.entryMarks">
                          <td>{{entryMark.mark}}</td>                          
                        </ng-container>
                      </tr>                                             
                    </ng-container> 
                    
                  </ng-container>                  
                </tbody>
              </nz-table>
            </div>
          </nb-card-body>
        </nb-card>
      </div>      
    </div>
  </div>
</div>
